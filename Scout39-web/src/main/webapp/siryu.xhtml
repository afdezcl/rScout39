<ui:composition template="templates/eventos.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
                xmlns:p="http://xmlns.jcp.org/jsf/passthrough">
    <ui:define name="title">Siryu</ui:define>
    <ui:define name="seccionnav">GRUPO SIRYU</ui:define>
    <ui:define name="eventos">

        <!-- Section: Blog v.1 -->
        <div class="col">
            <section class="mr-5 ml-6">
                <div class="row my-5">
                    <div class="col-6 col-sm-4"></div>
                    <!-- Section heading -->
                    <h2 class="h1-responsive font-weight-bold text-center col-6 col-sm-4" id="eventos">Eventos</h2>
                    <c:if test="#{controlAutorizacion.usuario.roles.nombrerol == 'ScouterSIRYU'}">
                        <div class="text-left col-6 col-sm-4">
                            <a class="btn btn-default btn-rounded mb-4 btn-blue" data-toggle="modal" data-target="#modalCrearEvento">Crear Evento</a>
                        </div>
                    </c:if>
                </div>
                <c:forEach items="#{beanEventos.eventosSIRYU}" var="evento">
                    <!-- Grid row -->
                    <div class="row">

                        <!-- Grid column -->
                        <div class="col-lg-5">                             
                            <div id="map-container-#{evento.id.toString()}" class="z-depth-1 mapa" style="height: 300px; width: 300px"></div>

                        </div>
                        <!-- Grid column -->

                        <!-- Grid column -->
                        <div class="col-lg-7">

                            <!-- Category -->
                            <a href="#!" class="green-text"><h6 class="font-weight-bold mb-3"><i class="fa fa-calendar pr-2"></i>Evento</h6></a>
                            <!-- Post title -->
                            <h3 class="font-weight-bold mb-3"><strong>#{evento.nombre}</strong></h3>                            
                            <!-- Excerpt -->
                            <p>#{evento.descripcion}</p>
                            <!-- Post data -->
                            <p>#{evento.fecha.toGMTString()}</p>
                            <!-- Read more button -->
                            <c:if test="#{controlAutorizacion.usuario.roles.nombrerol == 'ScouterSIRYU'}">
                                <a class="btn btn-success btn-md" data-toggle="collapse" href="#collapseParticipantes-#{evento.id.toString()}" aria-expanded="false" aria-controls="collapseParticipantes-#{evento.id.toString()}">Participantes</a>
                                <div class="collapse" id="collapseParticipantes-#{evento.id.toString()}">
                                    <div class="mt-3">
                                        <table class="table table-striped table-responsive-md btn-table">

                                            <!--Table head-->
                                            <thead>
                                                <tr>                                                
                                                    <th>Nombre</th>
                                                    <th>Apellidos</th>
                                                    <th>Nombre de Usuario</th>
                                                    <th>Correo electrónico</th>                                                                       
                                                    <th>Progresión</th>                                                
                                                </tr>
                                            </thead>
                                            <!--Table head-->
                                            <tbody>
                                                <tr>                                                
                                                    <td>Nombre</td>
                                                    <td>apellidos</td>
                                                    <td>alias</td>
                                                    <td>email</td>                                                                        
                                                    <td>
                                                        <button type="button" class="btn btn-default btn-rounded btn-sm my-0" data-toggle="modal" data-target="#rellenarProgresion">Rellenar</button>
                                                    </td>

                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </c:if>
                        </div>
                        <!-- Grid column -->

                    </div>
                    <c:if test="#{controlAutorizacion.usuario.roles.nombrerol == 'ScouterSIRYU'}">
                        <!-- Grid row -->
                        <div class="modal fade" id="rellenarProgresion" tabindex="-1" role="dialog" aria-labelledby="rellenarProgresionLabel" aria-hidden="true">
                            <div class="modal-dialog" role="document">
                                <div class="modal-content">
                                    <!--Header-->
                                    <div class="modal-header primary-color white-text">
                                        <h4 class="title">
                                            <i class="fa fa-tasks"></i> Rellenar Progresión</h4>
                                        <button type="button" class="close waves-effect waves-light" data-dismiss="modal" aria-label="Close">
                                            <span aria-hidden="true">×</span>
                                        </button>
                                    </div>
                                    <div class="modal-body">
                                        <p style="text-align: center;">Progresión</p>
                                    </div>
                                    <div class="modal-footer text-center">
                                        <button type="button" class="btn btn-default btn-success">Listo</button>                                    
                                    </div>
                                </div>
                            </div>
                        </div>
                    </c:if>
                    <hr class="my-5"/>

                </c:forEach>

            </section>
            <!-- Section: Blog v.1 -->
        </div>

        <div class="modal fade" id="modalCrearEvento" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header text-center">
                        <h4 class="modal-title w-100 font-weight-bold">Crear Evento</h4>
                        <button type="button" class="close waves-effect waves-light" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">×</span>
                        </button>
                    </div>
                    <div class="modal-body mx-3">
                        <h:form id="crearEvento">

                            <!-- Material input text -->
                            <div class="md-form">
                                <i class="fa fa-font prefix grey-text"></i>
                                <h:inputText class="form-control" binding="#{nombre}"/>
                                <h:outputLabel for="materialFormNombreEvento">Nombre Evento</h:outputLabel>
                            </div>

                            <div class="md-form">
                                <i class="fa fa-font prefix grey-text"></i>
                                <h:inputTextarea cols="20" rows="5" class="form-control" binding="#{descripcion}"/>
                                <h:outputLabel for="materialFormDescripcionEvento">Descripcion Evento</h:outputLabel>
                            </div>

                            <div class="md-form">
                                <i class="fa fa-calendar prefix grey-text"></i>
                                <h:inputText class="form-control" binding="#{fecha}"/>
                                <h:outputLabel for="materialFormFechaEvento">Fecha Evento</h:outputLabel>
                            </div>

                            <div class="md-form">
                                <i class="fa fa-compass prefix grey-text"></i>
                                <h:inputText class="form-control" binding="#{latitud}"/>
                                <h:outputLabel for="materialFormLatitudEvento">Latitud</h:outputLabel>
                            </div>

                            <div class="md-form">
                                <i class="fa fa-compass prefix grey-text"></i>
                                <h:inputText class="form-control" binding="#{longitud}"/>
                                <h:outputLabel for="materialFormFechaEvento">Longitud</h:outputLabel>
                            </div>

                            <div class="text-center mt-4">
                                <h:commandButton class="btn btn-primary" value="CrearEvento" action="#{beanEventos.doCrearEvento(nombre.value,descripcion.value, fecha.value, latitud.value,longitud.value)}" type="submit"/>
                            </div>
                        </h:form>

                    </div>

                </div>
            </div>
        </div>       
    </ui:define>
    <ui:define name="sectionh">Nuestros mejores proyectos</ui:define>
</ui:composition>